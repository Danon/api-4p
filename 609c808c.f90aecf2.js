(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{117:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return i})),a.d(t,"default",(function(){return m}));var n=a(1),r=a(6),l=(a(0),a(136)),s=a(139),o={id:"forum",title:"Forum"},c={id:"forum",title:"Forum",description:"import Request from '../src/core/components/Request';\r",source:"@site/docs\\forum.mdx",permalink:"/api-4p/docs/forum",editUrl:"https://github.com/Danon/api-4p/edit/master/website/docs/forum.mdx",sidebar:"someSidebar",previous:{title:"Jobs",permalink:"/api-4p/docs/jobs"}},i=[],u={rightToc:i};function m(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},u,a,{components:t,mdxType:"MDXLayout"}),Object(l.b)(s.a,{get:!0,url:"/topics",parameters:{sort:"id",order:"desc"},mdxType:"Request"}),Object(l.b)(s.a,{get:!0,url:"/topics/:id",parameters:{id:1},mdxType:"Request"}),Object(l.b)(s.a,{get:!0,url:"/forums",mdxType:"Request"}))}m.isMDXComponent=!0},139:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n=a(0),r=a.n(n),l=a(145),s=a(146),o=a(217),c=a(226);function i(e){const[t,a]=r.a.useState("prod");return r.a.useEffect(()=>a(e.env),[e.env]),r.a.createElement(c.a,{value:t,onChange:function(t,n){n&&(a(n),e.onChange(n))},size:"small",exclusive:!0},r.a.createElement(o.a,{value:"local"},"Local"),r.a.createElement(o.a,{value:"dev"},"Dev"),r.a.createElement(o.a,{value:"prod"},"Prod"))}var u=a(148),m=a.n(u),p=a(93),d=a.n(p),h=({color:e,children:t})=>r.a.createElement("div",{className:d.a.badge,style:{backgroundColor:e}},r.a.createElement("div",{className:d.a.wrapper},t));a(12);function f(e){for(const t in e)return!0;return!1}var E=a(94),g=a.n(E),b=a(218),v=a(224),y=a(223),j=a(221),T=a(222),C=a(219);function x({children:e}){const[t,a]=r.a.useState(!1),n=r.a.useRef(null);return r.a.useEffect(()=>{if(t){const{current:e}=n;null!==e&&e.focus()}},[t]),r.a.createElement("div",null,r.a.createElement(b.a,{onClick:()=>a(!0)},"Edit schema"),r.a.createElement(v.a,{open:t,onClose:()=>a(!1),scroll:"body","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.a.createElement(C.a,{id:"scroll-dialog-title"},"Resource schema"),r.a.createElement(j.a,{dividers:!1},r.a.createElement(T.a,{id:"scroll-dialog-description",ref:n,tabIndex:-1}),e),r.a.createElement(y.a,null,r.a.createElement(b.a,{onClick:()=>a(!1),color:"primary",disabled:!0},"Make a request"),r.a.createElement(b.a,{onClick:()=>a(!1),color:"primary"},"Cancel"))))}function O(e,t){t=Object.assign({},t);const a=[];return[e=e.replace(/:([a-z]+)/g,(e,n)=>{if(n in t){let e=t[n];return a.push(n),delete t[n],e}throw new Error(`Missing replacement for '${n}'`)}),t,a]}function q(e){return function(e,t){const a=[];for(let n of t.matchAll(e))a.push(n[1]);return a}(/:([a-z]+)/g,e)}var w=a(138),N=({children:e,language:t})=>r.a.createElement(w.a,{className:`language-${t}`},e),R=function({method:e,url:t,parameters:a,schema:n}){return f(a)||f(n)?function({parameters:e,suffix:t,schema:a}){return r.a.createElement("table",{className:g.a.parameters},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"parameter"),r.a.createElement("th",null,"example value"))),r.a.createElement("tbody",null,Object.entries(e).map(([e,a])=>r.a.createElement("tr",{key:e},r.a.createElement("td",null,k(t(e)),k(function(e){const t=typeof e;if("number"===t)return"int";return t}(a)),e),r.a.createElement("td",null,function(e){if("string"==typeof e)return`"${e}"`;return e}(a)))),f(a)?r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("code",null,"schema","{}")," ","{","...}"),r.a.createElement("td",null,r.a.createElement(x,null,r.a.createElement("div",{className:g.a.minWidthCode},r.a.createElement(N,null,JSON.stringify(a,null,2)))))):null))}({parameters:a,suffix:function(a){return q(t).includes(a)?"path/":"GET"===e?"query?":null},schema:n}):r.a.createElement("p",{className:g.a.noParams},"This resource doesn't take any parameters :)")};function k(e){return null===e?null:r.a.createElement("code",{style:{marginRight:"3px"}},e)}var S=a(95),$=a.n(S),G=class extends r.a.Component{suffix(e){return q(this.props.url).includes(e)?"path/":"GET"===this.props.method?"query?":null}get badgeColor(){return{POST:"#49cc90",GET:"#61affe",PUT:"#fca130"}[this.props.method]}get placeholders(){return q(this.props.url)}render(){const{url:e,method:t,parameters:a,schema:n,pagination:l,requiresLogin:s}=this.props;return r.a.createElement("div",{className:$.a.params},r.a.createElement("header",null,r.a.createElement(h,{color:this.badgeColor},t),r.a.createElement("span",{className:$.a.endpoint},e)),r.a.createElement(R,{method:t,url:e,parameters:a,schema:n}),r.a.createElement("div",{style:{display:"flex"}},s?r.a.createElement(h,{color:"#ffcccc"},r.a.createElement(m.a,{fontSize:"small"})," Requires Login"):null,l?r.a.createElement(h,{color:"#49cc90"},"+ Pagination"):null))}};function P(e){const t=Object.entries(e).map(([e,t])=>encodeURIComponent(e)+"="+encodeURIComponent(t));return t.length?"?"+t.join("&"):""}function L({method:e,url:t,parameters:a}){const[n,l]=O(t,a);return"GET"===e?function(e,t){return r.a.createElement(N,{language:"js"},`fetch("${e+P(t)}", {\n  "method": "GET",\n  "headers": {\n    "Accept": "application/json",\n    "Content-type": "application/json"\n  }\n})`)}(n,l):function(e,t,a){return r.a.createElement(N,{language:"js"},`fetch("${t}", {\n  "method": "${e}",\n  "headers": {\n    "Accept": "application/json",\n    "Content-type": "application/json"\n  },\n  "body": JSON.stringify(${n=JSON.stringify(a,null,2),l=2,n.split("\n").map(e=>" ".repeat(l)+e).join("\n").substr(l)})\n})`);var n,l}(e,n,l)}var M=class extends r.a.Component{render(){let{method:e,url:t,parameters:a}=this.props;const[n,r]=O(t,a);return"GET"===e?this.codeMethodGet(n,r):this.code(e,n,r)}code(e,t,a){return r.a.createElement(N,{language:"bash"},`curl -X ${e} ${t} \\\n      -H "Accept: application/json" \\\n      -H "Content-Type: application/json" \\\n      -d '${JSON.stringify(a)}'`)}codeMethodGet(e,t){return r.a.createElement(N,{language:"bash"},`curl -X GET ${e+P(t)} \\\n      -H "Accept: application/json" \\\n      -H "Content-Type: application/json"`)}},J=a(96),U=a.n(J);class A extends r.a.Component{constructor(e){super(e),this.state={env:"prod"}}get method(){if(this.props.get)return"GET";if(this.props.post)return"POST";if(this.props.put)return"PUT";throw"Missing HTTP method"}render(){return this.doRender({url:this.baseUrl+this.props.url,parameters:this.props.parameters||{},schema:this.props.schema||{},pagination:this.props.pagination,requiresLogin:this.props.requiresLogin})}get baseUrl(){return{prod:"https://api.4programmers.net/v1",dev:"https://api.4programmers.dev/v1",local:"http://localhost:8080/v1"}[this.state.env]}doRender({url:e,parameters:t,schema:a,pagination:n,requiresLogin:o}){return r.a.createElement("div",null,r.a.createElement(l.a,{defaultValue:"params",values:[{label:"Params",value:"params"},{label:"fetch()",value:"fetch"},{label:"curl",value:"curl"}]},r.a.createElement(s.a,{value:"params"},r.a.createElement(G,{method:this.method,url:e,parameters:t,schema:a,pagination:n,requiresLogin:o})),r.a.createElement(s.a,{value:"fetch"},r.a.createElement(L,{method:this.method,url:e,parameters:Object.assign({},t,a)})),r.a.createElement(s.a,{value:"curl"},r.a.createElement(M,{method:this.method,url:e,parameters:Object.assign({},t,a)}))),r.a.createElement("div",{className:U.a.wrapper},r.a.createElement(i,{env:this.state.env,onChange:e=>this.setState({env:e})})))}}}}]);